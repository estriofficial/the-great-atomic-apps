<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D Space — The Great Atomic Apps</title>

<style>
html,body{
  margin:0;
  height:100%;
  overflow:hidden;
  background:#06161c;
  font-family:Arial,Helvetica,sans-serif;
  color:#fff;
}
canvas{display:block}

#ui{
  position:fixed;
  top:16px; left:16px; right:16px;
  display:flex;
  justify-content:space-between;
  pointer-events:none;
  z-index:10;
}
.pill{
  pointer-events:auto;
  background:rgba(0,0,0,.45);
  backdrop-filter:blur(10px);
  padding:10px 14px;
  border-radius:14px;
  box-shadow:0 15px 40px rgba(0,0,0,.6);
}
a.btn{
  text-decoration:none;
  color:#00e6a8;
  border:2px solid #00e6a8;
  padding:8px 12px;
  border-radius:10px;
  font-weight:bold;
}

#center{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9;
}
#start{
  background:#00e6a8;
  color:#072028;
  border:none;
  border-radius:14px;
  padding:16px 22px;
  font-size:1rem;
  font-weight:800;
  cursor:pointer;
  box-shadow:0 18px 45px rgba(0,230,168,.3);
}
#start:hover{transform:translateY(-2px)}

#crosshair{
  position:fixed;
  left:50%; top:50%;
  transform:translate(-50%,-50%);
  width:10px; height:10px;
  border:2px solid rgba(255,255,255,.7);
  border-radius:50%;
  display:none;
}
</style>
</head>

<body>

<div id="ui">
  <div class="pill">
    <strong>3D Space</strong>
    <span style="opacity:.85;font-size:.9rem">
      Click Start → WASD + mouse → ESC to unlock
    </span>
  </div>
  <div class="pill">
    <a class="btn" href="index.html">← Back</a>
  </div>
</div>

<div id="center">
  <button id="start">Start Walking</button>
</div>

<div id="crosshair"></div>

<script type="module">
import * as THREE from "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js";
import { PointerLockControls } from "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/controls/PointerLockControls.js";

/* Scene */
const scene = new THREE.Scene();
scene.fog = new THREE.Fog(0x06161c, 0, 80);

const camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 200);
camera.position.set(0,1.7,6);

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth, innerHeight);
renderer.setPixelRatio(devicePixelRatio);
document.body.appendChild(renderer.domElement);

/* Lights */
scene.add(new THREE.HemisphereLight(0xaadfff, 0x0b1c23, 1));
const sun = new THREE.DirectionalLight(0xffffff, 0.8);
sun.position.set(5,10,5);
scene.add(sun);

/* Floor */
const floor = new THREE.Mesh(
  new THREE.PlaneGeometry(400,400),
  new THREE.MeshStandardMaterial({color:0x0b1c23, roughness:.9})
);
floor.rotation.x = -Math.PI/2;
scene.add(floor);

/* Objects */
function box(x,y,z,w,h,d,c){
  const m = new THREE.Mesh(
    new THREE.BoxGeometry(w,h,d),
    new THREE.MeshStandardMaterial({color:c})
  );
  m.position.set(x,y,z);
  scene.add(m);
}

box(0,1.5,-15,25,3,1,0x0b2a31);
box(-12,1.5,-6,1,3,20,0x0b2a31);
box(12,1.5,-6,1,3,20,0x0b2a31);
box(-5,1.2,-8,2,2.5,.3,0x00e6a8);
box(5,1.2,-8,2,2.5,.3,0x00c994);

/* Controls */
const controls = new PointerLockControls(camera, document.body);
const startBtn = document.getElementById("start");
const center = document.getElementById("center");
const crosshair = document.getElementById("crosshair");

startBtn.onclick = () => controls.lock();
controls.addEventListener("lock", ()=>{
  center.style.display="none";
  crosshair.style.display="block";
});
controls.addEventListener("unlock", ()=>{
  center.style.display="flex";
  crosshair.style.display="none";
});

/* Movement */
const keys = {w:0,a:0,s:0,d:0};
onkeydown = e => keys[e.key.toLowerCase()] = 1;
onkeyup = e => keys[e.key.toLowerCase()] = 0;

const clock = new THREE.Clock();
const vel = new THREE.Vector3();
const dir = new THREE.Vector3();
const speed = 6;

function animate(){
  requestAnimationFrame(animate);
  const dt = clock.getDelta();

  if(controls.isLocked){
    dir.set(keys.d-keys.a,0,keys.s-keys.w).normalize();
    vel.x += (dir.x*speed - vel.x)*20*dt;
    vel.z += (dir.z*speed - vel.z)*20*dt;
    controls.moveRight(vel.x*dt);
    controls.moveForward(vel.z*dt);
    camera.position.y = 1.7;
  }

  renderer.render(scene,camera);
}
animate();

onresize = ()=>{
  camera.aspect = innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
};
</script>

</body>
</html>
